<div id="achievements" class="page-layout blank p-24" fusePerfectScrollbar>
  <div class="header-achievements p-16 p-sm-24" fxLayout="row" fxLayoutAlign="space-between center">
    <h1 class="l-heading">Mein FreiwilligenLEBEN</h1>
  </div>

  <mat-card>
    <organisation-filter (tenantSelectionChanged)="tenantSelectionChanged($event)">
    </organisation-filter>
  </mat-card>

  <div *ngIf="marketplace !== undefined">

    <div class="content">
      <mat-tab-group dynamicHeight="true" (selectedTabChange)="tabChanged($event)">
        <mat-tab label="Tätigkeiten">
          <!-- with ng-temp = lazy loading:  -->
          <!-- I would prefer not to lazy load, since db fetch takes foooor ever, each time tab is changed-->
          <!-- TODO PROBLEM: not showing line in timeline chart if not lazy loaded -->
          <ng-template matTabContent>
            <p *ngIf="timeout && !isLocalRepositoryConnected" class="alert alert-info">
              <i class="fas fa-exclamation-circle"></i> &nbsp; Lokaler Freiwilligenpass nicht erreichbar, deshalb
              stammen die Daten vom Marktplatz!
            </p>

            <fuse-tasks [classInstanceDTOs]="filteredClassInstanceDTOs" [selectedTenants]="selectedTenants">
            </fuse-tasks>
          </ng-template>
        </mat-tab>

        <mat-tab label="Kompetenzen">
          <ng-template matTabContent>
            <fuse-competencies></fuse-competencies>
          </ng-template>
        </mat-tab>

        <mat-tab label="Funktionen">
          <ng-template matTabContent>
            <!-- <fuse-functions></fuse-functions> -->
          </ng-template>
        </mat-tab>

        <mat-tab label="Verdienste">
          <ng-template matTabContent>
            <!-- <fuse-accomplishments></fuse-accomplishments> -->
          </ng-template>
        </mat-tab>
      </mat-tab-group>
    </div>

  </div>


  <!-- <mat-card *ngIf="
  filteredClassInstanceDTOs.length === 0 && selectedTenants.length > 0" class="loadData">
      <ngx-spinner bdOpacity="0.1" bdColor="#FFFFFF" size="medium" color="#000000" type="ball-scale-ripple-multiple"
        [fullScreen]="false">
        <p class="loadingText">Loading Data...</p>
      </ngx-spinner>
    </mat-card> -->

  <p *ngIf="timeout && selectedTenants.length === 0" class="alert alert-info">
    <i class="fas fa-exclamation-circle"></i> &nbsp; Keine Organisation ausgewählt!
  </p>

  <p *ngIf="timeout && marketplace === undefined" class="alert alert-info">
    <i class="fas fa-exclamation-circle"></i> &nbsp; Noch keiner Organisation beigetreten!
  </p>

  <p *ngIf="timeout && filteredClassInstanceDTOs.length === 0 && isLocalRepositoryConnected && selectedTenants.length > 0"
    class="alert alert-info">
    <i class="fas fa-exclamation-circle"></i> &nbsp; Keine Daten im Local Repository!
  </p>

</div>