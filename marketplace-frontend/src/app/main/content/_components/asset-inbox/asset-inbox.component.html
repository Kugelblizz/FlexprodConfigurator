<div class="inbox-content">

  <mat-table #inboxTable class="inbox-table" [dataSource]="datasource" *ngIf="datasource.data.length > 0">

    <ng-container matColumnDef="checkboxes">
      <mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
          [indeterminate]="selection.hasValue() && !isAllSelected()">
        </mat-checkbox>
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
          [checked]="selection.isSelected(row)">
        </mat-checkbox>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="archetype">
      <mat-header-cell *matHeaderCellDef>Archetype</mat-header-cell>
      <mat-cell *matCellDef="let entry">

          <div *ngIf="entry.classArchetype=='COMPETENCE'" fxLayout="row" fxLayoutAlign="start center">
            <div style=" z-index: 255; position: relative; width: 25px; height: 25px;" mat-tooltip="Competence">
              <img style="object-fit: contain; max-width: 100%; width: 100%; max-height: 100%; height: 100%;"
                src="/assets/competence.jpg">
            </div>

            <div style="padding-left: 10px">
              Kompetenz
            </div>
          </div>

          <div *ngIf="entry.classArchetype=='FUNCTION'" fxLayout="row" fxLayoutAlign="start center">
            <div style=" z-index: 255; position: relative; width: 25px; height: 25px;" mat-tooltip="Competence">
              <img style="object-fit: contain; max-width: 100%; width: 100%; max-height: 100%; height: 100%;"
                src="/assets/TODO">
            </div>

            <div style="padding-left: 10px">
              Funktion
            </div>
          </div>

          <div *ngIf="entry.classArchetype=='TASK'" fxLayout="row" fxLayoutAlign="start center">
            <div style=" z-index: 255; position: relative; width: 25px; height: 25px;" mat-tooltip="Competence">
              <img style="object-fit: contain; max-width: 100%; width: 100%; max-height: 100%; height: 100%;"
                src="/assets/cog.png">
            </div>

            <div style="padding-left: 10px">
              Tätigkeit
            </div>
          </div>

          <div *ngIf="entry.classArchetype=='ACHIEVEMENT'">

            <div *ngIf="entry.feedbackType==null" fxLayout="row" fxLayoutAlign="start center">
              <div style=" z-index: 255; position: relative; width: 25px; height: 25px;" mat-tooltip="Competence">
                <img style="object-fit: contain; max-width: 100%; width: 100%; max-height: 100%; height: 100%;"
                  src="/assets/icons/achievements_black.png">
              </div>

              <div style="padding-left: 10px">
                Achievement
              </div>
            </div>

            <div *ngIf="entry.feedbackType!=null" fxLayout="row" fxLayoutAlign="start center">
              <div style=" z-index: 255; position: relative; width: 25px; height: 25px;" mat-tooltip="Competence">
                <mat-icon inline="true" style="font-size: 25px; line-height: normal">feedback</mat-icon>
              </div>

              <div style="padding-left: 10px">
                Feedback
              </div>
            </div>
          </div>




      </mat-cell>
    </ng-container>


    <ng-container matColumnDef="issuer">
      <mat-header-cell *matHeaderCellDef>Issuer</mat-header-cell>
      <mat-cell *matCellDef="let entry" fxLayout="row" fxLayoutAlign="start center">

        <img class="avatar" src="/assets/images/avatars/profile.jpg">
        <div>{{getNameForEntry(entry.issuerId,'issuer')}}</div>

      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="user">
      <mat-header-cell *matHeaderCellDef>Volunteer</mat-header-cell>
      <mat-cell *matCellDef="let entry" fxLayout="row" fxLayoutAlign="start center">

        <img class="avatar" src="/assets/images/avatars/profile.jpg">
        <div>{{getNameForEntry(entry.userId,'volunteer')}}</div>

      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="label">
      <mat-header-cell *matHeaderCellDef>Label</mat-header-cell>
      <mat-cell *matCellDef="let entry">
        <div fxLayout="column" fxLayoutAlign="start start">
          <div>{{entry.name}}</div>
          <div class="pl-8">{{findNameProperty(entry)}}</div>
        </div>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
      <mat-cell *matCellDef="let entry">
        {{getDateString(entry.timestamp)}}
      </mat-cell>
    </ng-container>


    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{ 'highlighted_new': row.status == 'new' }"
      class="table-row"></mat-row>
  </mat-table>

  <div *ngIf="datasource.data.length <= 0" class="inbox-empty-message">
    keine Einträge vorhanden - die Inbox ist leer
  </div>


</div>

<div class="button-row" fxLayout="row" fxLayoutAlign="space-between center">
  <button mat-raised-button color="secondary" (click)="navigateBack()">Zurück</button>
  <div></div>
  <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="selection.isEmpty()">Weiter</button>
</div>