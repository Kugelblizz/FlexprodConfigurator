<link
  type="text/css"
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Muli|Roboto:300,400,500,700|Google+Sans"
/>

<div
  class="page-layout blank p-24"
  fusePerfectScrollbar
  style="overflow: scroll;"
>
  <div style="padding-top: 12px;"></div>

  <div
    class="header mat-accent-bg p-16 p-sm-24"
    fxLayout="row"
    fxLayoutAlign="space-between center"
  >
    <h1>Mein FreiwilligenPASS</h1>
    <div
      style="position: relative; width: 120px; height: 120px; padding-top: 0px;"
    >
      <img
        style="object-fit: contain; max-width: 100%; max-height: 100%;"
        [src]="image"
      />
    </div>
  </div>

  <!-- todo selection -->
  <div style="padding-top: 40px;"></div>
  <div fxLayout="row">
    <div
      class="mat-card dashboard-main p-20 m-20"
      fxLayout="column"
      *ngIf="tenants.length > 0"
    >
      <div style="padding-top: 10px;"></div>

      <!-- First row -->
      <div
        fxLayout="row"
        fxLayoutAlign="space-between center"
        style="padding-left: 5px;"
      >
        <div fxLayout="row" fxLayoutAlign="start center"></div>

        <div></div>

        <!--Share Icon and Menu-->
        <div style="padding-right: 20px; padding-top: 5px;">
          <button
            mat-mini-fab
            type="button"
            color="primary"
            [matMenuTriggerFor]="shareMenu"
          >
            <mat-icon>share</mat-icon>
          </button>

          <mat-menu
            #shareMenu="matMenu"
            xPosition="after"
            yPosition="below"
            [overlapTrigger]="false"
          >
            <mat-label mat-menu-item disabled style="color: black;"
              >Freigeben an...</mat-label
            >
            <button
              mat-menu-item
              (click)="triggerShareDialog()"
              style="width: 220px;"
              matTooltip="Recruiter: 'Best Jobs'"
            >
              <div fxLayout="row" fxLayoutAlign="start center">
                <img
                  class="avatar"
                  src="../../../../assets/images/logos/recruiter.jpg"
                />
                <div style="padding-left: 10px;"></div>
                <div>Best Jobs</div>
              </div>
            </button>
          </mat-menu>
        </div>
      </div>
      <!--END Share Icon and Menu-->

      <!-- END First row -->

      <div style="padding-top: 10px;"></div>

      <!---FILTER BY ORGANIZATION ROW-->
      <organisation-filter></organisation-filter>

      <div style="padding-top: 10px;"></div>

      <div
        *ngIf="userImagePaths && userImagePaths.size > 0"
        class="table"
        fxLayout="row"
        style="width: 100%;"
        fxLayoutAlign="start center"
      >
        <div class="pt-32"></div>

        <mat-table
          #table
          matSort
          [dataSource]="dataSourceRepository"
          style="width: 100%;"
        >
          <ng-container matColumnDef="issuer">
            <mat-header-cell *matHeaderCellDef>Aussteller</mat-header-cell>
            <mat-cell *matCellDef="let entry">
              <div fxLayout="row" fxLayoutAligne="start center">
                <img class="avatar" [src]="getImagePathById(entry.issuerId)" />
                <div fxLayout="column">
                  <div>{{ getIssuerName(entry.issuerId) }}</div>
                  <div class="pl-8">
                    {{ getIssuerPosition(entry.issuerId) }}
                  </div>
                </div>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="taskName">
            <mat-header-cell *matHeaderCellDef> Eintrag </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <span>{{ element.name }} </span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="taskType1">
            <mat-header-cell *matHeaderCellDef> Typ </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <span>{{ element.taskType1 }} </span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef>Datum</mat-header-cell>
            <mat-cell *matCellDef="let entry">
              {{ getDateString(entry.blockchainDate) }}
            </mat-cell>
          </ng-container>

          <mat-header-row
            *matHeaderRowDef="displayedColumnsRepository"
          ></mat-header-row>
          <mat-row
            *matRowDef="let row; columns: displayedColumnsRepository"
            [ngClass]="{ highlighted_new: row.status == 'new' }"
          ></mat-row>
        </mat-table>
      </div>
      <mat-paginator
        *ngIf="dataSourceRepository.data > 0"
        [pageSize]="12"
        id="paginator"
        showFirstLastButtons
      ></mat-paginator>

      <p *ngIf="dataSourceRepository.data == 0" class="alert alert-info">
        Es befinden Sich noch keine Eintr√§ge im digitalen Freiwilligenpass!
      </p>
    </div>
    <div class="mat-card dashboard-org p-20 m-20">
      <div fxLayout="column" fxLayoutAlign="center center">
        <h2 *ngIf="tenants.length > 0">Deine Organisationen</h2>
        <h2 *ngIf="tenants.length == 0">
          Du bist noch keiner Organisation beigetreten
        </h2>

        <div fxLayout="column" fxLayoutAlign="center center">
          <div
            *ngFor="let t of tenants"
            class="org-icon-container"
            matTooltip="{{ t.name }}"
          >
            <img class="org-icon" [src]="getTenantImage(t)" />
          </div>
        </div>
        <button
          class="mt-20"
          mat-raised-button
          color="primary"
          (click)="navigateToTenantOverview()"
        >
          Finde Organisationen
        </button>
      </div>
    </div>
  </div>
</div>
