<div class="page-layout blank p-24" fusePerfectScrollbar>

  <div class="layout1" fxLayout="row wrap" fxLayoutAlign="center">

    <!-- Projects -->
    <fuse-widget [@animate]="{value:'*',params:{y:'100%'}}" class="widget" fxLayout="column"
                 fxFlex="100" fxFlex.gt-sm="60">

      <div class="fuse-widget-front mat-white-bg mat-elevation-z2">

        <div class="px-16 py-8 border-bottom" fxLayout="row"
             fxLayoutAlign="space-between center">
          <div class="h1">Projects</div>
        </div>

        <div class="projects" fxLayout="row wrap" fxLayoutAlign="center">
          <mat-expansion-panel *ngFor="let project of projects" [expanded]="true" fxFlex="100">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h2>{{project.name}}</h2>
                <div class="progress-bar">
                  <span>0</span>
                  <mat-progress-bar [color]="'primary'" [mode]="'determinate'"
                                    [value]="calculateProgess(project)"></mat-progress-bar>
                  <span>100</span>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <ng-template matExpansionPanelContent>
              <div class="mat-expansion-panel-content">
                <mat-sidenav-container>
                  <!-- CENTER -->
                  <div class="center">

                    <!-- CONTENT -->
                    <div class="content pd-12 mat-white-bg" fusePerfectScrollbar>
                      <mat-form-field>
                <textarea matInput placeholder="Description" [readonly]="true" [value]="project.description"
                          rows="5"></textarea>
                      </mat-form-field>

                      <mat-form-field>
                        <input matInput [readonly]="true" placeholder="Start Date"
                               [value]="project.startDate | date: 'dd.MM.yyyy hh:mm'"/>
                      </mat-form-field>

                      <mat-form-field>
                        <input matInput [readonly]="true" placeholder="End Date"
                               [value]="project.endDate | date: 'dd.MM.yyyy hh:mm'">
                      </mat-form-field>
                    </div>
                    <!-- / CONTENT -->
                  </div>
                  <!-- / CENTER -->
                  <!-- SIDENAV

                  <mat-sidenav class="sidenav right-sidenav " position="end" opened="true" mode="side"
                               fuseMatSidenavHelper="project-member-right-sidenav" mat-is-locked-open="gt-sm">
                    <fuse-project-members></fuse-project-members>
                  </mat-sidenav>
                  <!-- / SIDENAV -->
                </mat-sidenav-container>
                <mat-divider></mat-divider>
                <mat-sidenav-container>
                  <div *ngIf="participant">
                    <fuse-project-task-list [projectId]="project.id"
                                            [marketplaceId]="project.marketplaceId"
                                            [participantId]="participant.id"
                                            [finishedOnly]="false"
                                            [availableOnly]="false"
                                            [engagedOnly]="true"></fuse-project-task-list>
                  </div>
                </mat-sidenav-container>
              </div>
            </ng-template>
          </mat-expansion-panel>

        </div>
      </div>
    </fuse-widget>

    <!-- Marketplaces -->
    <fuse-widget [@animate]="{value:'*',params:{y:'100%'}}" class="widget" fxLayout="column"
                 fxFlex="100" fxFlex.gt-sm="40">

      <div class="fuse-widget-front mat-white-bg mat-elevation-z2">

        <div class="px-16 py-8 border-bottom" fxLayout="row"
             fxLayoutAlign="space-between center">
          <div class="h1">Marketplaces</div>
        </div>

        <div class="marketplaces" fxLayout="row wrap" fxLayoutAlign="center" *fuseIfOnDom>
          <div class="marketplace" *ngFor="let marketplace of registeredMarketplaces" fxFlex="100">

            <div class="marketplace-content" fxLayout="column">

              <div class="header" fxLayout="row" fxLayoutAlign="center center">
                <div class="category" fxFlex>
                  {{marketplace.name}}
                </div>
              </div>

              <div class="content" fxLayout="column" fxLayoutAlign="center center" fxFlex>
                <div class="h1">{{marketplace.shortName}}</div>
                <div class="h1">{{marketplace.url}}</div>

              </div>
            </div>
          </div>
        </div>

      </div>
    </fuse-widget>

  </div>
</div>


